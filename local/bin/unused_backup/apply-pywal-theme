#!/bin/bash

# Script completo para forzar la sincronizaci√≥n de pywal en rofi y hyprland

echo "üé® Forzando sincronizaci√≥n de pywal..."

# Verificar que pywal est√© instalado
if ! command -v wal &> /dev/null; then
    echo "‚ùå Error: pywal no est√° instalado"
    exit 1
fi

# Obtener el wallpaper actual
current_wallpaper="$(cat ~/.cache/wal/wal)"

if [ -z "$current_wallpaper" ]; then
    echo "‚ùå No se pudo encontrar el wallpaper actual en ~/.cache/wal/wal"
    exit 1
fi

# Forzar la regeneraci√≥n de todos los templates
wal -i "$current_wallpaper" -n -t -e

# Sincronizar rofi style-3 con nuevos colores
echo "üöÄ Sincronizando rofi style-3..."
~/.local/bin/sync-rofi-style3-pywal

# Recargar Hyprland para aplicar los nuevos colores
hyprctl reload

# Notificaci√≥n de √©xito
notify-send "üé® Tema Sincronizado" "Rofi y Hyprland ahora usan los mismos colores"

echo "‚úÖ Sincronizaci√≥n completada. Verifica los colores ahora."
