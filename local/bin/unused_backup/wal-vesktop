#!/bin/bash

# Wrapper para pywal que sincroniza autom√°ticamente con Vesktop
# Uso: wal-vesktop -i /path/to/wallpaper [otras opciones de wal]

# Ejecutar pywal con todos los argumentos pasados
wal "$@"

# Verificar que pywal se ejecut√≥ correctamente
if [ $? -eq 0 ]; then
    echo ""
    echo "üé® Sincronizando colores con Vesktop..."
    
    # Ejecutar script de sincronizaci√≥n
    if [ -x "$HOME/.local/bin/vesktop-pywal-sync" ]; then
        "$HOME/.local/bin/vesktop-pywal-sync"
        
        # Recargar Vesktop autom√°ticamente si est√° corriendo
        if pgrep -f "vesktop" >/dev/null 2>&1; then
            echo ""
            if [ -x "$HOME/.local/bin/vesktop-reload" ]; then
                "$HOME/.local/bin/vesktop-reload"
            else
                echo "üí° Usa Ctrl+R en Vesktop para recargar los cambios"
            fi
        fi
    else
        echo "‚ùå Error: vesktop-pywal-sync no encontrado"
    fi
else
    echo "‚ùå Error al ejecutar pywal"
    exit 1
fi
