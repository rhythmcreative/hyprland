#!/bin/bash

# Configuraci√≥n completa del sistema autom√°tico de temas wal+GTK+nwg-look

echo "üé® CONFIGURACI√ìN SISTEMA AUTOM√ÅTICO DE TEMAS"
echo "============================================="
echo ""

# Funci√≥n de √©xito
success() {
    echo "‚úì $1"
}

# Funci√≥n de informaci√≥n
info() {
    echo "‚Ñπ $1"
}

# Configurar sistema base
info "Configurando sistema base..."
~/.local/bin/setup-nwg-wal

echo ""
info "Generando tema GTK inicial..."
~/.local/bin/wal-gtk-theme-generator

echo ""
info "Verificando configuraci√≥n..."

# Verificar que todos los scripts existen
scripts=(
    "wal-auto"
    "wal-gtk-theme-generator" 
    "setup-nwg-wal"
    "wallpaper-monitor"
    "wallpaper-selector"
)

for script in "${scripts[@]}"; do
    if [[ -x "$HOME/.local/bin/$script" ]]; then
        success "Script $script configurado"
    else
        echo "‚ùå Script $script no encontrado o no es ejecutable"
    fi
done

# Verificar hook de wal
if [[ -x "$HOME/.config/wal/post.sh" ]]; then
    success "Hook de wal configurado"
else
    echo "‚ùå Hook de wal no configurado"
fi

echo ""
echo "üéØ SISTEMA CONFIGURADO - C√≥mo usar:"
echo "===================================="
echo ""
echo "üîß M√âTODO AUTOM√ÅTICO (Recomendado):"
echo "   Super+Shift+W  -> Selector de wallpaper con tema autom√°tico"
echo ""
echo "üì± COMANDOS R√ÅPIDOS:"
echo "   theme imagen.jpg          -> Cambiar tema completo"
echo "   theme-restore             -> Restaurar √∫ltimo tema"
echo "   nwg                       -> Abrir nwg-look"
echo "   theme-gtk                 -> Regenerar tema GTK manualmente"
echo ""
echo "ü§ñ MONITOR AUTOM√ÅTICO (Opcional):"
echo "   monitor-start             -> Iniciar detecci√≥n autom√°tica"
echo "   monitor-stop              -> Detener monitor"
echo "   monitor-status            -> Ver estado"
echo ""
echo "üìÇ UBICACIONES:"
echo "   ~/.themes/wal-gtk-auto    -> Tema GTK generado"
echo "   ~/.cache/wal/             -> Colores y configuraciones"
echo "   ~/.config/nwg-look/       -> Configuraci√≥n nwg-look"
echo ""

# Preguntar si quiere iniciar el monitor autom√°tico
echo "¬øQuieres iniciar el monitor autom√°tico de wallpaper? (y/N)"
read -r response
if [[ "$response" =~ ^[Yy]$ ]]; then
    ~/.local/bin/wallpaper-monitor start
    echo ""
    success "Monitor autom√°tico iniciado"
    echo "Ahora cualquier cambio de wallpaper actualizar√° el tema autom√°ticamente"
fi

echo ""
echo "üéâ ¬°CONFIGURACI√ìN COMPLETA!"
echo ""
echo "Prueba cambiar el wallpaper con Super+Shift+W"
echo "El tema GTK se aplicar√° autom√°ticamente y estar√° disponible en nwg-look"
echo ""
echo "Para m√°s ayuda, ejecuta cualquier script sin argumentos para ver la ayuda."
