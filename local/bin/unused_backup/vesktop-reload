#!/bin/bash

# Script para recargar Vesktop sin reiniciar
# Usa la funcionalidad de recarga del navegador (Ctrl+R)

echo "ğŸ”„ Recargando Vesktop..."

# Buscar la ventana de Vesktop y enviar Ctrl+R
if command -v xdotool >/dev/null 2>&1; then
    # MÃ©todo con xdotool (mÃ¡s confiable)
    VESKTOP_WINDOW=$(xdotool search --name "Vesktop" | head -1)
    if [ -n "$VESKTOP_WINDOW" ]; then
        xdotool windowactivate $VESKTOP_WINDOW
        sleep 0.5
        xdotool key ctrl+r
        echo "âœ… Vesktop recargado usando xdotool"
    else
        echo "âŒ No se pudo encontrar la ventana de Vesktop"
    fi
elif command -v wmctrl >/dev/null 2>&1; then
    # MÃ©todo alternativo con wmctrl
    wmctrl -a "Vesktop" && sleep 0.5 && xdotool key ctrl+r
    echo "âœ… Vesktop recargado usando wmctrl"
else
    echo "âš ï¸  xdotool no disponible. Instalando..."
    
    # Verificar si es Arch Linux y sugerir instalaciÃ³n
    if command -v pacman >/dev/null 2>&1; then
        echo "ğŸ’¡ Ejecuta: sudo pacman -S xdotool"
        echo "ğŸ’¡ Luego podrÃ¡s usar este script para recarga automÃ¡tica"
    else
        echo "ğŸ’¡ Instala xdotool para recarga automÃ¡tica"
    fi
    
    echo "ğŸ”„ Alternativa: Usa Ctrl+R manualmente en Vesktop"
fi
