#!/bin/bash

echo "üîß Verificando configuraci√≥n de Mako..."

# Verificar si Mako est√° ejecut√°ndose
if pgrep -x "mako" > /dev/null; then
    echo "‚úÖ Mako est√° ejecut√°ndose"
else
    echo "‚ùå Mako no est√° ejecut√°ndose"
    echo "   Iniciando Mako..."
    mako &
    sleep 1
fi

# Verificar si pywal est√° configurado
if [[ -f ~/.cache/wal/colors.sh ]]; then
    echo "‚úÖ Pywal configurado correctamente"
    source ~/.cache/wal/colors.sh
    echo "   Colores actuales: background=$color0, foreground=$color7"
else
    echo "‚ö†Ô∏è  Pywal no configurado. Ejecuta 'wal -i /path/to/image' primero"
fi

# Verificar si el hook de sincronizaci√≥n existe
if [[ -f ~/.config/wal/done.d/mako-sync.sh && -x ~/.config/wal/done.d/mako-sync.sh ]]; then
    echo "‚úÖ Hook de sincronizaci√≥n autom√°tica configurado"
else
    echo "‚ùå Hook de sincronizaci√≥n autom√°tica no configurado"
fi

# Verificar configuraci√≥n de Mako
if [[ -f ~/.config/mako/config ]]; then
    echo "‚úÖ Configuraci√≥n de Mako encontrada"
else
    echo "‚ùå Configuraci√≥n de Mako no encontrada"
fi

echo ""
echo "üß™ Probando notificaciones..."

# Notificaci√≥n general
notify-send "Test General" "Esta es una notificaci√≥n general con colores de pywal"
sleep 2

# Notificaci√≥n de volumen (estilo simplificado)
notify-send -a volume "Volumen" "70% - Nuevo estilo simple"
sleep 2

# Notificaci√≥n de audio
notify-send "Audio Test" "Notificaci√≥n de audio con colores sincronizados"

echo ""
echo "‚ú® Prueba completada. Las notificaciones deber√≠an aparecer con los colores de pywal."
echo ""
echo "üìù Para sincronizar manualmente: ~/.local/bin/sync-mako-pywal"
echo "üîÑ Para probar la sincronizaci√≥n autom√°tica: cambia el wallpaper con 'wal -i /path/to/image'"
