#!/bin/bash

# Script wrapper para combinar wallpaper changer con sincronizaciÃ³n de Powerlevel10k
# Ejecutado por: Super + Shift + W en Hyprland

echo "ğŸ¨ Iniciando sincronizaciÃ³n completa: Wallpaper + Waybar + Powerlevel10k"

# Primero ejecutar el selector de wallpaper con sincronizaciÃ³n de Waybar
echo "ğŸ–¼ï¸ Paso 1: Cambiando wallpaper y sincronizando Waybar..."
if ~/.local/bin/wallpaper-changer-with-waybar-sync; then
    echo "âœ… Wallpaper y Waybar sincronizados correctamente"
    
    # Luego ejecutar la sincronizaciÃ³n automÃ¡tica de Powerlevel10k
    echo "ğŸ¨ Paso 2: Sincronizando Powerlevel10k con pywal..."
    if ~/.local/bin/p10k-auto-sync; then
        echo "âœ… Powerlevel10k sincronizado automÃ¡ticamente"
        
        # Opcional: tambiÃ©n ejecutar el script manual para mÃ¡xima compatibilidad
        ~/.local/bin/p10k-pywal-sync >/dev/null 2>&1 || true
        
        echo "ğŸ‰ Â¡SincronizaciÃ³n completa exitosa!"
        echo "ğŸ’¡ Los colores de P10k se aplicarÃ¡n automÃ¡ticamente en terminales existentes"
    else
        echo "âŒ Error al sincronizar Powerlevel10k"
        exit 1
    fi
else
    echo "âŒ Error al cambiar wallpaper/sincronizar Waybar"
    exit 1
fi
