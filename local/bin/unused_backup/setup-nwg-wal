#!/bin/bash

# Script para configurar nwg-look con integraciÃ³n completa de wal

echo "ðŸ”§ Configurando nwg-look con integraciÃ³n wal"
echo "============================================="

# Crear configuraciÃ³n de nwg-look si no existe
NWG_CONFIG="$HOME/.config/nwg-look"
mkdir -p "$NWG_CONFIG"

# Configurar nwg-look para que detecte nuestros temas
cat > "$NWG_CONFIG/config" << 'EOF'
# ConfiguraciÃ³n nwg-look con integraciÃ³n wal
gtk-theme=wal-gtk-auto
icon-theme=Papirus
cursor-theme=Adwaita
font-name=Sans 10
cursor-size=24

# Directorios adicionales de temas
themes-dir=/home/$USER/.themes
icons-dir=/usr/share/icons
cursor-dir=/usr/share/icons
EOF

# Verificar que el tema actual estÃ¡ aplicado
echo "Verificando configuraciÃ³n GTK..."

# Aplicar tema en todas las configuraciones GTK
gsettings set org.gnome.desktop.interface gtk-theme "wal-gtk-auto"
gsettings set org.gnome.desktop.interface color-scheme "prefer-dark"

# Configurar tambiÃ©n para aplicaciones Flatpak
if command -v flatpak >/dev/null 2>&1; then
    echo "Configurando tema para aplicaciones Flatpak..."
    flatpak --user override --env=GTK_THEME=wal-gtk-auto
fi

# Configurar variables de entorno para la sesiÃ³n
if [ ! -f "$HOME/.profile" ] || ! grep -q "GTK_THEME" "$HOME/.profile"; then
    echo "" >> "$HOME/.profile"
    echo "# Tema GTK automÃ¡tico desde wal" >> "$HOME/.profile"
    echo "export GTK_THEME=wal-gtk-auto" >> "$HOME/.profile"
fi

echo ""
echo "âœ“ nwg-look configurado"
echo "âœ“ Tema GTK aplicado globalmente"
echo "âœ“ ConfiguraciÃ³n Flatpak actualizada"
echo ""
echo "ðŸŽ¨ Para usar el sistema:"
echo "   1. Cambia wallpaper: wal-auto -i imagen.jpg"
echo "   2. Abre nwg-look para ver/cambiar temas"
echo "   3. El tema 'wal-gtk-auto' se actualiza automÃ¡ticamente"
echo ""
echo "ðŸ“‚ Temas disponibles en: ~/.themes/"
echo "ðŸ”§ ConfiguraciÃ³n nwg-look: ~/.config/nwg-look/"
